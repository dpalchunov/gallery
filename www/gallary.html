<!DOCTYPE html>
<html lang="ru-RU">
    <head>
	<meta charset="utf-8"/>
	<link rel="stylesheet" type="text/css" href="gallary_style.css" />
        <title>Галерея</title>
	<script type="text/javascript" src="js/jquery.js"></script>

<!--Скрпты отвечающие за догрузку нжней части страницы-->	
<script>
var thisPageNum = 10;
var thisWork = 1;
var picturesCount =100;
//функция получает следующую страницу
function getNextP(){
  if(thisWork == 1){
    //флаг позволяет запускать функцию сключительно последовательно
    thisWork = 0;
    //отображаем указатель загрузки	
    $("#upBlock").css('display','block');
    //запрашиваем данные у страницы get.php
    //передаём ей
    //	page=+thisPageNum
    //получаем от неё
    //	data
    //data обрабатываем в функции
    //	function
    $.get("get.php?page="+thisPageNum+"&",
	  //функция обработки полученных данных
	  function(data){
	    //скрываем индикатор загрузки
	    $("#upBlock").css('display','none');
	    //берем то что уже есть между тегами блока LoadDiv
	    //прибавляем к этому новые данные
	    //и устанавливаем то тчо получилось тому же LoadDiv между тегами
	    $("#sketches_table_body").html($("#sketches_table_body").html()+" "+data);
	    //увеличиваем переменную, чтобы потом передавать ей в страницу формирования новых данных
	    thisPageNum = thisPageNum + 3;
	    //флаг позволяет запускать функцию сключительно последовательно
	    thisWork = 1;
	    if (thisPageNum>=picturesCount) {
	       showFooter();
	    }	    
	  }
    );
  }
}

$(document).ready(function(){
  var scrH = $(window).height();
  var scrHP = $("#container").height();
 
  $(window).scroll(function(){
		    // number of window pixels that are hidden from view above
		    var scro = $(this).scrollTop();
		    //высота всех блоков вместе
		    var scrHP = $("#main_content").height();
		    var scrH2 = 0;
		    //расстояния от самого верха страницы до самого низа отображаемого  онка
		    scrH2 = scrH + scro;
		    //расстояния которое осталось прокрутить до низу, чтобы странца закончилась
		    //здесь еще надо учесть ту чать которая над контейнером +header.height
		    var leftH = scrHP/*+header.height*/ - scrH2;
		
		    if(leftH < 300 & thisPageNum<picturesCount){
			     getNextP();
		    }
		  });
});

//функция отображает футер в самом низу страницы
function showFooter(){
    //устанавливаем положение footer

    if( (typeof ($('#header').css("height")) != "undefined")&&(typeof ($('#main_content').css("height")) != "undefined") ) {
	//установка top у футера в случае если он позиционируется абсолютно
	//////////////////////
	//headerHeight = $("#header").css('height');
	//headerHeight.replace(/[^-\d\.]/g, '');
	//mainContentHeight =  $("#main_content").css('height');
	//mainContentHeight.replace(/[^-\d\.]/g, '');
	//$("#footer").css('top',parseInt(headerHeight) + parseInt(mainContentHeight));
        ////////////////////////////////////////////////
	$("#footer").css('display','block');	
    }	  
}
</script>
<!--Конец скрптов отвечающих за догрузку нжней части страницы-->	

<!--Скрипт для выезжающей панели-->	
<script src="js/jquery.tabSlideOut.js" type="text/javascript"></script>
<script type="text/javascript">
$(function(){
	$('.panel').tabSlideOut({							//Класс панели   
		tabHandle: '.panelButton',						//Класс кнопки
		pathToTabImage: 'images/panel/open_btn1.png',				//Путь к изображению кнопки
		pathToTabImageClose: 'images/panel/close_btn.png',			//Путь к изображению кнопки закрывающей панель
		imageHeight: '94px',						//Высота кнопки
		imageWidth: '46px',						//Ширина кнопки
		tabLocation: 'left',						//Расположение панели top - выдвигается сверху, right - выдвигается справа, bottom - выдвигается снизу, left - выдвигается слева
		speed: 300,								//Скорость анимации
		action: 'click',								//Метод показа click - выдвигается по клику на кнопку, hover - выдвигается при наведении курсора
		topPos: '5px',							//Отступ сверху
		fixedPosition: true						//Позиционирование блока false - position: absolute, true - position: fixed
	});
});
</script>
    </head>
   
    <body overflow: scroll;>

	<div id="upBlock"><img src="img/loader.gif" border="0" /></div>
	    <div class="panel">
		<a class="panelButton" href="http://jemand.ru">Content</a> <!-- Ссылка для пользователей с отключенным JavaScript -->
		<h3><span lang="ru">Заголовок</span></h3><br>
		<span lang="ru">
			Любое содержание здесь!
		</span>
	    </div>
        <div id="left_column_wrap">
	     <div id="left_column">
		<div id="returner"></div>		
	    </div> 		
	</div> 
	
	<div id="wrap">	    	    
 
	    <div id="header">		
		<div id="header_name">		
		</div><!--end header_name-->
		<div id="nav_menu">		    
		    <div id="nav_about">
			<a href="main.html"></a>
		    </div><!--end nav_about-->
		    <div id="nav_contacts">		
		    </div><!--end nav_contacts-->
		    <div id="nav_gallary" class="active">		
		    </div><!--end nav_gallary-->
		    <div id="nav_order">		
		    </div><!--end nav_order-->		
		</div><!--end nav_menu-->		
	    </div><!--end header-->
	    <div id="main_content">		
		<!--<div id="sketches_table_wrap">-->
		    <table id="sketches_table">
			<tbody id="sketches_table_body">
			    <tr>				
				<td><img  src="images/gallary/sketches/1.jpg"></td>
				<td><img  src="images/gallary/sketches/2.jpg"></td>
				<td><img  src="images/gallary/sketches/3.jpg"></td>			
			    </tr>
			    <tr class="separate_row"><td></td><td></td><td></td></tr>
			    <tr>
				<td><img src="images/gallary/sketches/4.jpg"></td>
				<td><img src="images/gallary/sketches/5.jpg"></td>
				<td><img src="images/gallary/sketches/6.jpg"></td>			
			    </tr>
			    <tr class="separate_row"><td></td><td></td><td></td></tr>			
			    <tr>
				<td><img src="images/gallary/sketches/7.jpg"></td>
				<td><img src="images/gallary/sketches/8.jpg"></td>
				<td><img src="images/gallary/sketches/9.jpg"></td>				
			    </tr>
			    <tr class="separate_row"><td></td><td></td><td></td></tr>			    
			</tbody> 
		    </table>
		<!--</div>-->
	    </div><!--end main_content-->
	    <div id="footer">
		<div id="footer_phrase_name"> 	    
		</div><!--end footer_phrase_name-->		
	    </div><!--end footer-->	    
	</div><!--end wrap-->
    </body>
</html>